version: 3
parallel_plan: true
parallel_apply: true
projects:
  - name: test
    dir: ./
    autoplan:
      when_modified:
        - "*.tf"
        - "*.tfvars"
    workflow: dev
  - dir: terraform/qa1
    terraform_version: v1.3.6
    workflow: qa
    apply_requirements: ["mergeable"]
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "*.tfvars"
        - "../modules/*/*.tf"
  - dir: terraform/qa2
    terraform_version: v1.3.6
    workflow: qa
    apply_requirements: ["approved", "mergeable"]
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "*.tfvars"
        - "../modules/*/*.tf"
 
